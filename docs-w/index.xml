<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>
            
            
            Clint A Jordan</title>
        <link>https://code.fs.usda.gov/pages/clint-jordan/site/</link>
        <description>Recent content 
            on Clint A Jordan</description>
        
        <lastBuildDate>Mon, 03 Apr 2023 17:20:24 -0600</lastBuildDate>
        <generator>Hugo -- gohugo.io</generator>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
            <atom:link href="https://code.fs.usda.gov/pages/clint-jordan/site/index.xml" rel="self" type="application/rss&#43;xml" />
        
            
            <item>
                <title>Oracle DB Security Assessment Tool</title>
                <link>https://code.fs.usda.gov/pages/clint-jordan/site/notes/oracle/dbsat/</link>
                
                
                <description>&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;h2 id=&#34;download-archive&#34;&gt;Download archive&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#download-archive&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;p&gt;&lt;a href=&#34;https://www.oracle.com/database/technologies/security/dbsat.html#:~:text=Oracle%20Database%20Security%20Assessment%20Tool%20(DBSAT)%20is%20a%20popular%20command,controls%20to%20mitigate%20those%20risks.&#34;&gt;Download&lt;/a&gt;
from Oracle.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: My Oracle Support account is required.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;upload-archive-to-target-domain&#34;&gt;Upload archive to target domain&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#upload-archive-to-target-domain&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;p&gt;Upload the archive via WinSCP or other method.&lt;/p&gt;

&lt;h2 id=&#34;stage-archive-and-extract-contents&#34;&gt;Stage archive and extract contents&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#stage-archive-and-extract-contents&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;p&gt;Move or copy the archive to &lt;code&gt;/tmp&lt;/code&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;p-acct $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
mv dbsat.zip /tmp

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Log in as &lt;code&gt;root&lt;/code&gt; and change ownership of the archive

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;p-acct $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
sudo -iu root

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;root $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
cd /tmp
chown oracle:oinstall dbsat.zip

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;p&gt;Log in as &lt;code&gt;oracle&lt;/code&gt; and verify environment

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;root $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
exit

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;p-acct $&#34;
            data-output=&#34;3-20&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
sudo -iu oracle
env | grep ORA
ORACLE_UNQNAME=orcl
ORA_NLS10=/opt/oracle/product/19/db_1/nls/data
ORACLE_SID=edba02t
ORACLE_BASE=/opt/oracle
ORACLE_TERM=xterm
ORACLE_HOME=/opt/oracle/product/19/db_1

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;p&gt;Create a &lt;code&gt;dbsat&lt;/code&gt; directory

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;oracle $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
mkdir /tmp/dbsat

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Extract the archive contents

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;oracle $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
unzip /tmp/dbsat.zip -d /tmp/dbsat

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;

&lt;h2 id=&#34;unlock-the-system-user&#34;&gt;Unlock the &lt;code&gt;system&lt;/code&gt; user&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#unlock-the-system-user&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;



&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;oracle $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
sqlplus / as sysdba

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;blockquote&gt;
&lt;p&gt;Note: If the alias exists, simply &lt;code&gt;sql&lt;/code&gt; can be used&lt;/p&gt;
&lt;/blockquote&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;SQL&amp;gt;&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
alter user system identified by &#34;Myroot10%01Myroot10%04&#34;;
alter user system account unlock;
exit

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;


&lt;h2 id=&#34;collect-report-data&#34;&gt;Collect report data&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#collect-report-data&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;



&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;oracle $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
mkdir /tmp/dbsat/reports
cd /tmp/dbsat/reports
bash /tmp/dbsat/dbsat collect -n system@${ORACLE_SID} &#34;${ORACLE_SID}_$(date +%Y-%m-%d)&#34;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;


&lt;h2 id=&#34;generate-readable-report&#34;&gt;Generate readable report&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#generate-readable-report&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;



&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;oracle $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
./tmp/dbsat/dbsat report -n -a &#34;${ORACLE_SID}_$(date +%Y-%m-%d)&#34;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;blockquote&gt;
&lt;p&gt;Note: The above command will only work if you are generating the &lt;code&gt;.html&lt;/code&gt;
report on the same day that the data was collected. Otherwise you will need to
manually replace &lt;code&gt;${ORACLE_SID}_$(date +%Y-%m-%d)&lt;/code&gt; with the filename.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;copy-report-to-p-account-home&#34;&gt;Copy report to p-account home&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#copy-report-to-p-account-home&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;p&gt;Change permissions of the &lt;code&gt;.html&lt;/code&gt; report file

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;oracle $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
chmod 777 &#34;${ORACLE_SID}_$(date +%Y-%m-%d)_report.html&#34;
exit

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;p-acct $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
cp /tmp/dbsat/reports/REPORT_NAME ~/wherever/you/want/

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;blockquote&gt;
&lt;p&gt;Note: Replace REPORT_NAME with the &lt;code&gt;.html&lt;/code&gt; report filename and
&lt;code&gt;~/wherever/you/want/&lt;/code&gt; to your desired path.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;automation-idea&#34;&gt;Automation idea&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#automation-idea&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;p&gt;We may be able to script this process and run it on an OEM console to get
reports for every database all at once.&lt;/p&gt;
</description>
                
                        <author>Clint.Jordan@fakeEmailToMakeValidatorHappy.com (Clint Jordan)</author>
                
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/categories/notes">notes</category>
                                
                            
                        
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/oracle">oracle</category>
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/stig">STIG</category>
                                
                            
                        
                    
                
                <guid>https://code.fs.usda.gov/pages/clint-jordan/site/notes/oracle/dbsat/</guid>
                <pubDate>Mon, 03 Apr 2023 00:00:00 +0000</pubDate>
            </item>
        
            
            <item>
                <title>SQL/Protect - importing into db clone</title>
                <link>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/sql-protect/edb-backup-method/</link>
                
                
                <description>&lt;blockquote&gt;Importing SQL/Protect data into a backup&lt;/blockquote&gt;
&lt;h2 id=&#34;testing-procedure-overview&#34;&gt;Testing procedure overview&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#testing-procedure-overview&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;p&gt;There are three different maintenance scenarios that will be frequently
encountered.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Import SQL/Protect data from a backup to a newly restored database.
&lt;ul&gt;
&lt;li&gt;this is possible per &lt;a href=&#34;https://www.enterprisedb.com/docs/epas/latest/epas_security_guide/02_protecting_against_sql_injection_attacks/04_backing_up_restoring_sql_protect/&#34;&gt;edb documentation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Import SQL/Protect &amp;ldquo;learned&amp;rdquo; data from a dev/test cluster to a production
cluster
&lt;ul&gt;
&lt;li&gt;currently unclear if this is possible&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Import SQL/Protect &amp;ldquo;learned&amp;rdquo; data from a backup to a newly updated/patched
database&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Scenario 1 is found explicitly in the EDB documentation, so testing for scenario
2 can reasonably serve for both 1 and 2. Scenario 3 will depend entirely on EDB
maintaining SQL/Protect compatibility between versions, so this will not be
tested until EPAS is upgraded.&lt;/p&gt;

&lt;h2 id=&#34;scenario-2-importing-between-clusters&#34;&gt;Scenario 2: Importing between clusters&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#scenario-2-importing-between-clusters&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;



&lt;h3 id=&#34;step-1-create-test-clusters&#34;&gt;Step 1: Create test clusters&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#step-1-create-test-clusters&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;p&gt;Create a cluster to simulate development environment

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;enterprisedb $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
initdb -D ~/as13/data_db01d

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Create a cluster to simulate production environment

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;enterprisedb $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
initdb -D ~/as13/data_db01p

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Start both clusters

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;enterprisedb $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
pg_ctl -D ~/as13/data_db01d -o &#34;-p 5443&#34; start
pg_ctl -D ~/as13/data_db01p -o &#34;-p 5444&#34; start

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Connecting to a cluster

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;enterprisedb $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
psql &#34;port=5443&#34;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;

&lt;h3 id=&#34;step-2-create-databases-roles-and-schemas&#34;&gt;Step 2: Create databases, roles, and schemas&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#step-2-create-databases-roles-and-schemas&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;p&gt;Create database and roles. In this case there will be four user roles and
a single group role.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;edb=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
CREATE DATABASE db01d;
CREATE USER user1 PASSWORD &#39;pw1&#39;;
CREATE USER user2 PASSWORD &#39;pw2&#39;;
CREATE USER user3 PASSWORD &#39;pw3&#39;;
CREATE USER user4 PASSWORD &#39;pw4&#39;;
CREATE ROLE group1 IDENTIFIED BY &#39;pwg1&#39;;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Ensure that new users (public schema) do not have the ability to connect by
default via the &lt;code&gt;public&lt;/code&gt; schema.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;edb=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
REVOKE CONNECT ON DATABASE db01d FROM public;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Grant the connect privilege to all newly created users.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;edb=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
GRANT CONNECT ON DATABASE db1 TO user1, user2, user3, user4;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Grant the &lt;code&gt;group1&lt;/code&gt; role to a specific set of users.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;edb=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
GRANT group1 TO user2, user3;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Connect to database to create schemas (reminder: schemas are db level objects).

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;edb=#&#34;
            data-output=&#34;2,3&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
\c db01d
(psql 13.4.8, server 13.4.8)
You are now connected to database &#34;db01d&#34; as user &#34;enterprisedb&#34;.

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Create schemas for each user/role.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
CREATE SCHEMA IF NOT EXISTS user1 AUTHORIZATION user1;
CREATE SCHEMA IF NOT EXISTS user2 AUTHORIZATION user2;
CREATE SCHEMA IF NOT EXISTS user3 AUTHORIZATION user3;
CREATE SCHEMA IF NOT EXISTS user4 AUTHORIZATION user4;
CREATE SCHEMA IF NOT EXISTS group1 AUTHORIZATION group1;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;

&lt;h4 id=&#34;grouped-commands&#34;&gt;Grouped commands&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#grouped-commands&#34;&gt;#&lt;/a&gt;&lt;/h4&gt;


&lt;p&gt;Create database and roles on development cluster.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;enterprisedb $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
psql &#34;port=5443&#34;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;DATABASE&lt;/span&gt; db01d;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;USER&lt;/span&gt; user1 PASSWORD &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;pw1&amp;#39;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;USER&lt;/span&gt; user2 PASSWORD &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;pw2&amp;#39;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;USER&lt;/span&gt; user3 PASSWORD &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;pw3&amp;#39;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;USER&lt;/span&gt; user4 PASSWORD &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;pw4&amp;#39;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ROLE&lt;/span&gt; group1 IDENTIFIED &lt;span style=&#34;color:#66d9ef&#34;&gt;BY&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;pwg1&amp;#39;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;REVOKE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;CONNECT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ON&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;DATABASE&lt;/span&gt; db01d &lt;span style=&#34;color:#66d9ef&#34;&gt;FROM&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;GRANT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;CONNECT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ON&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;DATABASE&lt;/span&gt; db01d &lt;span style=&#34;color:#66d9ef&#34;&gt;TO&lt;/span&gt; user1, user2, user3, user4;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;GRANT&lt;/span&gt; group1 &lt;span style=&#34;color:#66d9ef&#34;&gt;TO&lt;/span&gt; user2;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;GRANT&lt;/span&gt; group1 &lt;span style=&#34;color:#66d9ef&#34;&gt;TO&lt;/span&gt; user3;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;c&lt;/span&gt; db01d;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SCHEMA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;IF&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NOT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;EXISTS&lt;/span&gt; user1 &lt;span style=&#34;color:#66d9ef&#34;&gt;AUTHORIZATION&lt;/span&gt; user1;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SCHEMA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;IF&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NOT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;EXISTS&lt;/span&gt; user2 &lt;span style=&#34;color:#66d9ef&#34;&gt;AUTHORIZATION&lt;/span&gt; user2;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SCHEMA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;IF&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NOT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;EXISTS&lt;/span&gt; user3 &lt;span style=&#34;color:#66d9ef&#34;&gt;AUTHORIZATION&lt;/span&gt; user3;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SCHEMA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;IF&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NOT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;EXISTS&lt;/span&gt; user4 &lt;span style=&#34;color:#66d9ef&#34;&gt;AUTHORIZATION&lt;/span&gt; user4;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SCHEMA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;IF&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NOT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;EXISTS&lt;/span&gt; group1 &lt;span style=&#34;color:#66d9ef&#34;&gt;AUTHORIZATION&lt;/span&gt; group1;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TABLE&lt;/span&gt; group1.t1(i VARCHAR);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;GRANT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;INSERT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ON&lt;/span&gt; group1.t1 &lt;span style=&#34;color:#66d9ef&#34;&gt;TO&lt;/span&gt; user2;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;GRANT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;INSERT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ON&lt;/span&gt; group1.t1 &lt;span style=&#34;color:#66d9ef&#34;&gt;TO&lt;/span&gt; user3;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Create database and roles on production cluster.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;enterprisedb $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
psql &#34;port=5444&#34;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;DATABASE&lt;/span&gt; db01p;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;USER&lt;/span&gt; user1 PASSWORD &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;pw1&amp;#39;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;USER&lt;/span&gt; user2 PASSWORD &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;pw2&amp;#39;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;USER&lt;/span&gt; user3 PASSWORD &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;pw3&amp;#39;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;USER&lt;/span&gt; user4 PASSWORD &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;pw4&amp;#39;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ROLE&lt;/span&gt; group1 IDENTIFIED &lt;span style=&#34;color:#66d9ef&#34;&gt;BY&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;pwg1&amp;#39;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;REVOKE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;CONNECT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ON&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;DATABASE&lt;/span&gt; db01p &lt;span style=&#34;color:#66d9ef&#34;&gt;FROM&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;GRANT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;CONNECT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ON&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;DATABASE&lt;/span&gt; db01p &lt;span style=&#34;color:#66d9ef&#34;&gt;TO&lt;/span&gt; user1, user2, user3, user4;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;GRANT&lt;/span&gt; group1 &lt;span style=&#34;color:#66d9ef&#34;&gt;TO&lt;/span&gt; user2;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;GRANT&lt;/span&gt; group1 &lt;span style=&#34;color:#66d9ef&#34;&gt;TO&lt;/span&gt; user3;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;c&lt;/span&gt; db01p;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SCHEMA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;IF&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NOT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;EXISTS&lt;/span&gt; user1 &lt;span style=&#34;color:#66d9ef&#34;&gt;AUTHORIZATION&lt;/span&gt; user1;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SCHEMA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;IF&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NOT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;EXISTS&lt;/span&gt; user2 &lt;span style=&#34;color:#66d9ef&#34;&gt;AUTHORIZATION&lt;/span&gt; user2;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SCHEMA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;IF&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NOT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;EXISTS&lt;/span&gt; user3 &lt;span style=&#34;color:#66d9ef&#34;&gt;AUTHORIZATION&lt;/span&gt; user3;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SCHEMA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;IF&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NOT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;EXISTS&lt;/span&gt; user4 &lt;span style=&#34;color:#66d9ef&#34;&gt;AUTHORIZATION&lt;/span&gt; user4;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SCHEMA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;IF&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NOT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;EXISTS&lt;/span&gt; group1 &lt;span style=&#34;color:#66d9ef&#34;&gt;AUTHORIZATION&lt;/span&gt; group1;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TABLE&lt;/span&gt; group1.t1(i VARCHAR);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;GRANT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;INSERT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ON&lt;/span&gt; group1.t1 &lt;span style=&#34;color:#66d9ef&#34;&gt;TO&lt;/span&gt; user2;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;GRANT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;INSERT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ON&lt;/span&gt; group1.t1 &lt;span style=&#34;color:#66d9ef&#34;&gt;TO&lt;/span&gt; user3;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;step-3-enable-and-configure-sqlprotect&#34;&gt;Step 3: Enable and configure SQL/Protect&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#step-3-enable-and-configure-sqlprotect&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;



&lt;h4 id=&#34;modify-the-postgresqlconf-file&#34;&gt;Modify the &lt;code&gt;postgresql.conf&lt;/code&gt; file&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#modify-the-postgresqlconf-file&#34;&gt;#&lt;/a&gt;&lt;/h4&gt;


&lt;p&gt;Development version (&lt;code&gt;/as13/data_db01d/postgresql.conf&lt;/code&gt;):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;# Shared Preload Libraries
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;shared_preload_libraries = &amp;#39;$libdir/sqlprotect&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;# SQL/Protect settings
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb_sql_protect.enabled = on
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb_sql_protect.level = learn
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb_sql_protect.max_protected_roles = 64
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb_sql_protect.max_protected_relations = 1024
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb_sql_protect.max_queries_to_save = 5000
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Production version (&lt;code&gt;/as13/data_db01p/postgresql.conf&lt;/code&gt;):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;# Shared Preload Libraries
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;shared_preload_libraries = &amp;#39;$libdir/sqlprotect&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;# SQL/Protect settings
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb_sql_protect.enabled = on
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb_sql_protect.level = active
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb_sql_protect.max_protected_roles = 64
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb_sql_protect.max_protected_relations = 1024
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb_sql_protect.max_queries_to_save = 5000
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&#34;restart-the-database-servers&#34;&gt;Restart the database servers&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#restart-the-database-servers&#34;&gt;#&lt;/a&gt;&lt;/h4&gt;


&lt;p&gt;
&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;enterprisedb $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-text&#34;&gt;
                    
pg_ctl -D ~/as13/data_db01d -o &#34;-p 5443&#34; stop
pg_ctl -D ~/as13/data_db01p -o &#34;-p 5444&#34; stop

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;


&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;enterprisedb $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-text&#34;&gt;
                    
pg_ctl -D ~/as13/data_db01d -o &#34;-p 5443&#34; start
pg_ctl -D ~/as13/data_db01p -o &#34;-p 5444&#34; start

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;

&lt;h4 id=&#34;run-sqlprotect-script-as-superuser&#34;&gt;Run SQL/Protect script as superuser&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#run-sqlprotect-script-as-superuser&#34;&gt;#&lt;/a&gt;&lt;/h4&gt;



&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-text&#34;&gt;
                    
\i /usr/edb/as13/share/contrib/sqlprotect.sql

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;


&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01p=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-text&#34;&gt;
                    
\i /usr/edb/as13/share/contrib/sqlprotect.sql

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;


&lt;h4 id=&#34;add-roles-to-the-protected-list&#34;&gt;Add roles to the protected list&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#add-roles-to-the-protected-list&#34;&gt;#&lt;/a&gt;&lt;/h4&gt;


&lt;p&gt;Include the &lt;code&gt;sqlprotect&lt;/code&gt; schema  in the search path.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-text&#34;&gt;
                    
SET search_path TO sqlprotect;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Add roles to the protected list.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-text&#34;&gt;
                    
SELECT protect_role(&#39;user1&#39;);
SELECT protect_role(&#39;user2&#39;);
SELECT protect_role(&#39;user3&#39;);
SELECT protect_role(&#39;user4&#39;);
SELECT protect_role(&#39;group1&#39;);

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Enable expanded display.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-text&#34;&gt;
                    
\x
Expanded display is on.

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;View the protected roles with OIDs.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;2,4-100&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-text&#34;&gt;
                    
SELECT * FROM edb_sql_protect;
-[ RECORD 1 ]------+------
dbid               | 16641
roleid             | 16642
protect_relations  | t
allow_utility_cmds | f
allow_tautology    | f
allow_empty_dml    | f
-[ RECORD 2 ]------+------
dbid               | 16641
roleid             | 16643
protect_relations  | t
allow_utility_cmds | f
allow_tautology    | f
allow_empty_dml    | f
-[ RECORD 3 ]------+------
dbid               | 16641
roleid             | 16644
protect_relations  | t
allow_utility_cmds | f
allow_tautology    | f
allow_empty_dml    | f
-[ RECORD 4 ]------+------
dbid               | 16641
roleid             | 16645
protect_relations  | t
allow_utility_cmds | f
allow_tautology    | f
allow_empty_dml    | f
-[ RECORD 5 ]------+------
dbid               | 16641
roleid             | 16646
protect_relations  | t
allow_utility_cmds | f
allow_tautology    | f
allow_empty_dml    | f

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;View the protected roles with object names.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;2-100&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-text&#34;&gt;
                    
SELECT * FROM list_protected_users;
-[ RECORD 1 ]------+-------
dbname             | db01d
username           | user1
protect_relations  | t
allow_utility_cmds | f
allow_tautology    | f
allow_empty_dml    | f
-[ RECORD 2 ]------+-------
dbname             | db01d
username           | user2
protect_relations  | t
allow_utility_cmds | f
allow_tautology    | f
allow_empty_dml    | f
-[ RECORD 3 ]------+-------
dbname             | db01d
username           | user3
protect_relations  | t
allow_utility_cmds | f
allow_tautology    | f
allow_empty_dml    | f
-[ RECORD 4 ]------+-------
dbname             | db01d
username           | user4
protect_relations  | t
allow_utility_cmds | f
allow_tautology    | f
allow_empty_dml    | f
-[ RECORD 5 ]------+-------
dbname             | db01d
username           | group1
protect_relations  | t
allow_utility_cmds | f
allow_tautology    | f
allow_empty_dml    | f


            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;

&lt;h3 id=&#34;step-4-run-test-suite&#34;&gt;Step 4: Run test suite&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#step-4-run-test-suite&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;



&lt;h4 id=&#34;create-tables-with-user1&#34;&gt;Create tables with &lt;code&gt;user1&lt;/code&gt;&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#create-tables-with-user1&#34;&gt;#&lt;/a&gt;&lt;/h4&gt;


&lt;p&gt;Connect as &lt;code&gt;user1&lt;/code&gt;.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;2-4&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
\c db01d user1
Password for user user1:
psql (13.10.14, server 13.10.14)
You are now connected to database &#34;db01d&#34; as user &#34;user1&#34;.

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Create table

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=&amp;gt;&#34;
            data-output=&#34;2-4&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
CREATE TABLE t1(i varchar);

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Insert data into tables

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=&amp;gt;&#34;
            data-output=&#34;2-4&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
INSERT INTO t1 values(&#39;this is user3 data in user1.t1&#39;);
INSERT INTO user4.t1 values(&#39;this is more user4 data in user4.t1&#39;);

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;

&lt;h4 id=&#34;create-tables-with-user2&#34;&gt;Create tables with &lt;code&gt;user2&lt;/code&gt;&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#create-tables-with-user2&#34;&gt;#&lt;/a&gt;&lt;/h4&gt;



&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;2-4&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
\c db01d user2
Password for user user2:
psql (13.10.14, server 13.10.14)
You are now connected to database &#34;db01d&#34; as user &#34;user2&#34;.

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;


&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=&amp;gt;&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
create table user2.t1(i VARCHAR);
INSERT INTO user2.t1 values(&#39;this is user2 data in user2.t1&#39;);
INSERT INTO user2.t1 values(&#39;this is more user2 data in user2.t1&#39;);
INSERT INTO group1.t1 values(&#39;this is user2 data in group1.t1&#39;);

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;


&lt;h4 id=&#34;create-tables-with-user3&#34;&gt;Create tables with &lt;code&gt;user3&lt;/code&gt;&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#create-tables-with-user3&#34;&gt;#&lt;/a&gt;&lt;/h4&gt;



&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;2-4&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
\c db01d user3
Password for user user3:
psql (13.10.14, server 13.10.14)
You are now connected to database &#34;db01d&#34; as user &#34;user3&#34;.

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;


&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=&amp;gt;&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
create table user3.t1(i VARCHAR);
INSERT INTO user3.t1 values(&#39;this is user3 data in user3.t1&#39;);
INSERT INTO user3.t1 values(&#39;this is more user3 data in user3.t1&#39;);
INSERT INTO group1.t1 values(&#39;this is user3 data in group1.t1&#39;);

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;


&lt;h4 id=&#34;create-tables-with-user4&#34;&gt;Create tables with &lt;code&gt;user4&lt;/code&gt;&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#create-tables-with-user4&#34;&gt;#&lt;/a&gt;&lt;/h4&gt;



&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;2-4&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
\c db01d user4
Password for user user4:
psql (13.10.14, server 13.10.14)
You are now connected to database &#34;db01d&#34; as user &#34;user4&#34;.

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;


&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=&amp;gt;&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
create table user4.t1(i VARCHAR);
INSERT INTO user4.t1 values(&#39;this is user4 data in user4.t1&#39;);
INSERT INTO user4.t1 values(&#39;this is more user4 data in user4.t1&#39;);

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;p&gt;Create tables script.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;c&lt;/span&gt; db01d user1;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;create&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;table&lt;/span&gt; user1.t1(i VARCHAR);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;INSERT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;INTO&lt;/span&gt; user1.t1 &lt;span style=&#34;color:#66d9ef&#34;&gt;values&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;this is user1 data in t1&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;INSERT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;INTO&lt;/span&gt; user1.t1 &lt;span style=&#34;color:#66d9ef&#34;&gt;values&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;this is more user1 data in t1&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;c&lt;/span&gt; db01d user2;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;create&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;table&lt;/span&gt; user2.t1(i VARCHAR);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;INSERT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;INTO&lt;/span&gt; user2.t1 &lt;span style=&#34;color:#66d9ef&#34;&gt;values&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;this is user2 data in user2.t1&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;INSERT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;INTO&lt;/span&gt; user2.t1 &lt;span style=&#34;color:#66d9ef&#34;&gt;values&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;this is more user2 data in user2.t1&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;INSERT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;INTO&lt;/span&gt; group1.t1 &lt;span style=&#34;color:#66d9ef&#34;&gt;values&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;this is user2 data in group1.t1&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;c&lt;/span&gt; db01d user3;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;create&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;table&lt;/span&gt; user3.t1(i VARCHAR);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;INSERT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;INTO&lt;/span&gt; user3.t1 &lt;span style=&#34;color:#66d9ef&#34;&gt;values&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;this is user3 data in user3.t1&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;INSERT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;INTO&lt;/span&gt; user3.t1 &lt;span style=&#34;color:#66d9ef&#34;&gt;values&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;this is more user3 data in user3.t1&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;INSERT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;INTO&lt;/span&gt; group1.t1 &lt;span style=&#34;color:#66d9ef&#34;&gt;values&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;this is user3 data in group1.t1&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;c&lt;/span&gt; db01d user4;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;create&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;table&lt;/span&gt; user4.t1(i VARCHAR);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;INSERT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;INTO&lt;/span&gt; user4.t1 &lt;span style=&#34;color:#66d9ef&#34;&gt;values&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;this is user4 data in user4.t1&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;INSERT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;INTO&lt;/span&gt; user4.t1 &lt;span style=&#34;color:#66d9ef&#34;&gt;values&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;this is more user4 data in user4.t1&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&#34;optional-enable-active-mode-on-development-database&#34;&gt;Optional: enable active mode on development database&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#optional-enable-active-mode-on-development-database&#34;&gt;#&lt;/a&gt;&lt;/h4&gt;


&lt;p&gt;Set &lt;code&gt;edb_sql_protect.level = active&lt;/code&gt; in &lt;code&gt;/as13/data_db01d/postgresql.conf&lt;/code&gt;.
Reload &lt;code&gt;/as13/data_db01d/postgresql.conf&lt;/code&gt; after modification.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;enterprisedb $&#34;
            data-output=&#34;2&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-text&#34;&gt;
                    
pg_ctl reload -D as13/data_db01d/
server signaled

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;

&lt;h3 id=&#34;step-5-export-sqlprotect-data&#34;&gt;Step 5: Export SQL/Protect data&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#step-5-export-sqlprotect-data&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;



&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-text&#34;&gt;
                    
SELECT sqlprotect.export_sqlprotect(&#39;/var/lib/edb/as13/backups/sqlprotect.dmp&#39;);

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;


&lt;h3 id=&#34;step-6-import-sqlprotect-data-into-production&#34;&gt;Step 6: Import SQL/Protect data into production&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#step-6-import-sqlprotect-data-into-production&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;p&gt;For this test, there wasn&amp;rsquo;t any data in the SQL/Protect objects, but for a real
import, data would need to be removed from the objects so that the OIDs can be
corrected upon import.&lt;/p&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01p=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-text&#34;&gt;
                    
DELETE FROM sqlprotect.edb_sql_protect_rel;
DELETE FROM sqlprotect.edb_sql_protect;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;p&gt;Check for existing statistics.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01p=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-text&#34;&gt;
                    
SELECT * FROM sqlprotect.edb_sql_protect_stats;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;If they do exist, drop them for each role.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01p=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-text&#34;&gt;
                    
SELECT sqlprotect.drop_stats(&#39;user&#39;);

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Check for existing offending queries.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01p=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-text&#34;&gt;
                    
SELECT * FROM sqlprotect.edb_sql_protect_queries;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;If they do exist, drop them for each role.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01p=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-text&#34;&gt;
                    
SELECT sqlprotect.drop_queries(&#39;user&#39;);

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;

&lt;h3 id=&#34;step-7-import-sqlprotect-data&#34;&gt;Step 7: Import SQL/Protect data&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#step-7-import-sqlprotect-data&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Critical&lt;/strong&gt;: the role names that were protected by SQL/Protect in the development
cluster &lt;strong&gt;must&lt;/strong&gt; exist in the production cluster.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;step-8-enable-active-mode&#34;&gt;Step 8: Enable active mode&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#step-8-enable-active-mode&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;



&lt;h3 id=&#34;step-9-run-test-suite&#34;&gt;Step 9: Run test suite&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#step-9-run-test-suite&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;



&lt;h3 id=&#34;step-10-run-second-test-suit&#34;&gt;Step 10: Run second test suit&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#step-10-run-second-test-suit&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;p&gt;Run commands that will be blocked by SQL/Protect to ensure learned behavior has
been transferred.&lt;/p&gt;
</description>
                
                        <author>Clint.Jordan@fakeEmailToMakeValidatorHappy.com (Clint Jordan)</author>
                
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/categories/notes">notes</category>
                                
                            
                        
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/edb">edb</category>
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/sql-protect">sql protect</category>
                                
                            
                        
                    
                
                <guid>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/sql-protect/edb-backup-method/</guid>
                <pubDate>Wed, 22 Mar 2023 00:00:00 +0000</pubDate>
            </item>
        
            
            <item>
                <title>Backup, recovery, and PITR</title>
                <link>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-backup-recovery/</link>
                
                
                <description>&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;h2 id=&#34;logical-backups&#34;&gt;Logical Backups&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#logical-backups&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;



&lt;h3 id=&#34;pg_dump&#34;&gt;&lt;code&gt;pg_dump&lt;/code&gt;&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#pg_dump&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;ul&gt;
&lt;li&gt;database level SQL dump
&lt;ul&gt;
&lt;li&gt;does not backup users or tablespaces&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;does not block readers or writers&lt;/li&gt;
&lt;li&gt;does not operate with special permissions&lt;/li&gt;
&lt;/ul&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;enterprisedb $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
pg_dump [options] [dbname]

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;p&gt;List options.&lt;/p&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;enterprisedb $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
pg_dump --help

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;


&lt;h3 id=&#34;pg_dumpall&#34;&gt;&lt;code&gt;pg_dumpall&lt;/code&gt;&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#pg_dumpall&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;ul&gt;
&lt;li&gt;cluster level SQL dump&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;physical-backups&#34;&gt;Physical Backups&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#physical-backups&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;p&gt;Copy using OS commands&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;offline file system level backup&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Low Level API or &lt;code&gt;pg_basebackup&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;online file system level backup&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;pg_basebackup&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;uses replication technique to copy onto a media while server is in use&lt;/li&gt;
&lt;li&gt;automatically puts server in backup mode before backup and turns it off
after backup&lt;/li&gt;
&lt;/ul&gt;
</description>
                
                        <author>Clint.Jordan@fakeEmailToMakeValidatorHappy.com (Clint Jordan)</author>
                
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/categories/notes">notes</category>
                                
                            
                        
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/template">template</category>
                                
                            
                        
                    
                
                <guid>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-backup-recovery/</guid>
                <pubDate>Mon, 20 Mar 2023 00:00:00 +0000</pubDate>
            </item>
        
            
            <item>
                <title>Multi Cluster Server</title>
                <link>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-multi-cluster/</link>
                
                
                <description>&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;h2 id=&#34;create-the-clusters&#34;&gt;Create the clusters&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#create-the-clusters&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;



&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;enterprisedb $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
initdb -D /path/to/datadb1
initdb -D /path/to/datadb2

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;


&lt;h2 id=&#34;startstop-the-instances&#34;&gt;Start/stop the instances&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#startstop-the-instances&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;p&gt;Start

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;enterprisedb $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
pg_ctl -D /path/to/datadb1 -o &#34;-p 5444&#34; -l /path/to/logdb1 start
pg_ctl -D /path/to/datadb2 -o &#34;-p 5443&#34; -l /path/to/logdb2 start

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Stop

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;enterprisedb $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
pg_ctl -D /path/to/datadb1 -o &#34;-p 5444&#34; -l /path/to/logdb1 stop
pg_ctl -D /path/to/datadb2 -o &#34;-p 5443&#34; -l /path/to/logdb2 stop

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;

&lt;h2 id=&#34;connect-to-a-cluster&#34;&gt;Connect to a cluster&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#connect-to-a-cluster&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;



&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;enterprisedb $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
psql &#34;port=5444&#34;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

</description>
                
                        <author>Clint.Jordan@fakeEmailToMakeValidatorHappy.com (Clint Jordan)</author>
                
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/categories/notes">notes</category>
                                
                            
                        
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/edb">edb</category>
                                
                            
                        
                    
                
                <guid>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-multi-cluster/</guid>
                <pubDate>Mon, 13 Mar 2023 00:00:00 +0000</pubDate>
            </item>
        
            
            <item>
                <title>SQL Primer</title>
                <link>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-sql-primer/</link>
                
                
                <description>&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;h2 id=&#34;data-types&#34;&gt;Data types&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#data-types&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;Numeric Types&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Character Types&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Date/Time Types&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Other Types&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Advanced Server&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;NUMERIC&lt;/td&gt;
&lt;td&gt;CHAR&lt;/td&gt;
&lt;td&gt;TIMESTAMP&lt;/td&gt;
&lt;td&gt;BYTEA&lt;/td&gt;
&lt;td&gt;CLOB&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;INTEGER&lt;/td&gt;
&lt;td&gt;VARCHAR&lt;/td&gt;
&lt;td&gt;DATE&lt;/td&gt;
&lt;td&gt;BOOL&lt;/td&gt;
&lt;td&gt;BLOB&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SERIAL&lt;/td&gt;
&lt;td&gt;TEXT&lt;/td&gt;
&lt;td&gt;TIME&lt;/td&gt;
&lt;td&gt;MONEY&lt;/td&gt;
&lt;td&gt;VARCHAR2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;INTERVAL&lt;/td&gt;
&lt;td&gt;XML&lt;/td&gt;
&lt;td&gt;NUMBER&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;JSON&lt;/td&gt;
&lt;td&gt;XMLTYPE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;JSONB&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;List all data types.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\dT *
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;structured-query-language&#34;&gt;Structured Query Language&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#structured-query-language&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;Data Definition Language&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Data Manipulation Language&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Data Control Language&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Transaction Control Language&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;CREATE&lt;/td&gt;
&lt;td&gt;INSERT&lt;/td&gt;
&lt;td&gt;GRANT&lt;/td&gt;
&lt;td&gt;COMMIT&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ALTER&lt;/td&gt;
&lt;td&gt;UPDATE&lt;/td&gt;
&lt;td&gt;REVOKE&lt;/td&gt;
&lt;td&gt;ROLLBACK&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;DROP&lt;/td&gt;
&lt;td&gt;DELETE&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;SAVEPOINT&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TRUNCATE&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;SET&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;TRANSACTION&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</description>
                
                        <author>Clint.Jordan@fakeEmailToMakeValidatorHappy.com (Clint Jordan)</author>
                
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/categories/notes">notes</category>
                                
                            
                        
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/edb">edb</category>
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/sql">sql</category>
                                
                            
                        
                    
                
                <guid>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-sql-primer/</guid>
                <pubDate>Tue, 07 Mar 2023 00:00:00 +0000</pubDate>
            </item>
        
            
            <item>
                <title>SuperPuTTY Setup</title>
                <link>https://code.fs.usda.gov/pages/clint-jordan/site/docs/superputty-setup/</link>
                
                
                <description>&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;h2 id=&#34;1-download-and-launch-superputty&#34;&gt;1. Download and launch SuperPuTTY&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#1-download-and-launch-superputty&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;



&lt;h3 id=&#34;11-download&#34;&gt;1.1 Download&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#11-download&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;p&gt;Download the latest zip archive
&lt;a href=&#34;https://github.com/jimradford/superputty/releases/latest&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&#34;12-unzip-the-archive&#34;&gt;1.2 Unzip the archive&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#12-unzip-the-archive&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;p&gt;Unzip the archive and move it to somewhere within the &lt;code&gt;C:\Users\{USERNAME}&lt;/code&gt;
directory. For example, I decided to keep my SuperPuTTY files in
&lt;code&gt;C:\Users\ClintJordan\bin&lt;/code&gt;, but feel free place them anywhere you like.&lt;/p&gt;

&lt;h3 id=&#34;13-change-the-superputty-icon-and-pin-it&#34;&gt;1.3 Change the SuperPuTTY icon and pin it&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#13-change-the-superputty-icon-and-pin-it&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;p&gt;The SuperPuTTY icon will probably be set to the default command prompt icon,
which could be confusing if you ever actually use the command prompt. To change
the icon, follow the steps below.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Right click on the SuperPuTTY executable and click on &lt;strong&gt;Create Shortcut&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Right click on the new shortcut and click on &lt;strong&gt;Properties&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Under the &lt;strong&gt;Shortcut&lt;/strong&gt; tab, click on &lt;strong&gt;Change Icon&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Click &lt;strong&gt;Browse&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Navigate to the PuTTY directory (likely &lt;code&gt;C:\Program Files\PuTTY&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Double click on the PuTTY executable&lt;/li&gt;
&lt;li&gt;Select the icon with two computers connected by a lightening bolt&lt;/li&gt;
&lt;li&gt;Click &lt;strong&gt;OK&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Click &lt;strong&gt;Apply&lt;/strong&gt; then &lt;strong&gt;OK&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;If you have PuTTY currently pinned to the taskbar, unpin it&lt;/li&gt;
&lt;li&gt;Double click on the new shortcut to open SuperPuTTY&lt;/li&gt;
&lt;li&gt;Right click on the taskbar SuperPuTTY icon and pin it&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: Feel free to choose any icon you like. I chose to use the PuTTY icon
because after switching to SuperPuTTY, there aren&amp;rsquo;t any reasons to ever
open the standard PuTTY again. More details on this below.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;2-session-configuration&#34;&gt;2. Session Configuration&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#2-session-configuration&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;



&lt;h3 id=&#34;21-add-and-organize-sessions&#34;&gt;2.1 Add and organize sessions&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#21-add-and-organize-sessions&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;p&gt;There&amp;rsquo;s a few different ways to do this.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;File -&amp;gt; Import Sessions -&amp;gt; From PuTTY Settings&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Build a new session directory structure in the SuperPuTTY sessions window&lt;/li&gt;
&lt;li&gt;Hybrid 1 and 2 approach
&lt;ul&gt;
&lt;li&gt;import all your saved PuTTY sessions&lt;/li&gt;
&lt;li&gt;organize all the sessions into a directory structure&lt;/li&gt;
&lt;li&gt;delete all the saved PuTTY profiles except the default&lt;/li&gt;
&lt;li&gt;modify all SuperPuTTY sessions to use the default PuTTY profile&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Option 1 will probably get you up and running the quickest. But options 2 and
3 lead to a &lt;em&gt;&lt;strong&gt;much&lt;/strong&gt;&lt;/em&gt; more efficient way of handling session settings.&lt;/p&gt;
&lt;p&gt;To illustrate the advantage of options 2 and 3, let&amp;rsquo;s say you&amp;rsquo;ve accumulated 100
saved PuTTY sessions over the years and now you&amp;rsquo;ve decided that the font size
needs to increase. In PuTTY, you would have to load, increase the font size, and
save the new settings for all 100 sessions &lt;em&gt;individually&lt;/em&gt;. If you decided that
the font type needs to change a few weeks later&amp;hellip;same story all over again.
Option 1 alone does nothing to remedy this issue.&lt;/p&gt;
&lt;p&gt;On the other hand, if you have a little time to invest in options 2 or 3, you
could reduce the number of saved PuTTY settings from 100 to 1. That&amp;rsquo;s right, you
could change any setting in a single PuTTY profile and it will take effect in
all 100 of your SuperPuTTY sessions. This tutorial will proceed assuming that
you have taken the path of option 2.&lt;/p&gt;

&lt;h4 id=&#34;211-create-session-directory-structure&#34;&gt;2.1.1 Create session directory structure&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#211-create-session-directory-structure&#34;&gt;#&lt;/a&gt;&lt;/h4&gt;


&lt;p&gt;The sessions window should be visible by default. If it&amp;rsquo;s not visible, select
&lt;strong&gt;View -&amp;gt; Sessions&lt;/strong&gt;. Follow the steps below to start creating a session
structure.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Right click on &lt;strong&gt;PuTTY Sessions&lt;/strong&gt; and select new folder
&lt;ul&gt;
&lt;li&gt;create PROD, DEV, and TEST&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Create subdirectories within PROD, DEV, and TEST
&lt;ul&gt;
&lt;li&gt;as a starting point, create a PALS folder under TEST&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Right click on the TEST/PALS folder and select &lt;strong&gt;New&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;Session Name = &lt;code&gt;nfs0207 (db)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Host Name = &lt;code&gt;fsxnfsx0207.wrk.fs.usda.gov&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;PuTTY Session Profile = &lt;code&gt;Default Settings&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Now just repeat that process for all new sessions. The above steps just outline
a good example, feel free to organize and name sessions however you prefer.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Alternatively, if you went with option 3 (the hybrid approach), drag your
imported sessions into appropriate folders and then edit all of them so they
use the default profile.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Now your session window might look something like this:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://code.fs.usda.gov/pages/clint-jordan/site/images/superputty-session-struct.png&#34; alt=&#34;session struct&#34;&gt;&lt;/p&gt;

&lt;h4 id=&#34;212-clean-up-putty-profiles&#34;&gt;2.1.2 Clean up PuTTY profiles&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#212-clean-up-putty-profiles&#34;&gt;#&lt;/a&gt;&lt;/h4&gt;


&lt;p&gt;It would be a good idea at this point to back up your sessions list. If your
list is incomplete and you haven&amp;rsquo;t already done so, you might also want to
import your PuTTY Sessions as well. They will populate in a separate folder.&lt;/p&gt;
&lt;p&gt;To import PuTTY sessions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;File -&amp;gt; Import Sessions -&amp;gt; From PuTTY Settings&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To export SuperPuTTY sessions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;File -&amp;gt; Export Sessions&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now that all your sessions in SuperPuTTY are backed up and set to use the
default session profile, you can simply delete all the now unnecessary PuTTY
profiles and start fresh. Access the PuTTY Configurations through &lt;strong&gt;Tools -&amp;gt;
PuTTY Configuration&lt;/strong&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Before you do this be sure that the default profile is set up the way you
want! Take time to compare your most frequently used sessions to your default
profile. Be sure to save everything you want in the default.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;After you have cleaned up, your PuTTY Configuration window should look like
this:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://code.fs.usda.gov/pages/clint-jordan/site/images/fresh-putty.png&#34; alt=&#34;fresh putty&#34;&gt;&lt;/p&gt;
&lt;p&gt;If you prefer to have the terminal styled differently depending on the host or
type of work being performed, just save a few more general profiles. For
example, if you want PROD, DEV, and TEST servers to have different background
colors and/or fonts, you could create new profiles called PROD, DEV, and TEST
starting with the default. After doing this the PuTTY configuration window would
look like the screenshot below and there will be four different profiles to
choose from in SuperPuTTY.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://code.fs.usda.gov/pages/clint-jordan/site/images/custom-putty.png&#34; alt=&#34;custom putty&#34;&gt;&lt;/p&gt;

&lt;h2 id=&#34;3-set-up-capi-authentication&#34;&gt;3. Set up CAPI authentication&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#3-set-up-capi-authentication&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;



&lt;h3 id=&#34;31-set-auto-login-username&#34;&gt;3.1 Set auto-login username&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#31-set-auto-login-username&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;p&gt;First, I recommend eliminating the need to type in your account name every time
a new session is opened.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Open the PuTTY Configurations
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Tools -&amp;gt; PuTTY Configuration&lt;/strong&gt; from SuperPuTTY&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Load the default profile&lt;/li&gt;
&lt;li&gt;Navigate to &lt;strong&gt;Connection -&amp;gt; Data&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Insert your p-account into the &lt;strong&gt;Auto-login username&lt;/strong&gt; text bar&lt;/li&gt;
&lt;li&gt;Navigate back to &lt;strong&gt;Session&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Highlight the default profile and click &lt;strong&gt;Save&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;If you changed all the SuperPuTTY sessions to use the default profile as
outlined in &lt;a href=&#34;https://code.fs.usda.gov/pages/clint-jordan/site/docs/superputty-setup/#2-session-configuration&#34;&gt;&lt;strong&gt;2 Session
Configuration&lt;/strong&gt;&lt;/a&gt;, now your
p-account will automatically be inserted when opening new sessions. The purpose
of should now be very clear. Let&amp;rsquo;s take the efficiency a step further.&lt;/p&gt;

&lt;h3 id=&#34;32-configure-capi-authentication&#34;&gt;3.2 Configure CAPI authentication&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#32-configure-capi-authentication&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;



&lt;h4 id=&#34;321-add-capi-keys-to-default-putty-profile&#34;&gt;3.2.1 Add CAPI keys to default PuTTY profile&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#321-add-capi-keys-to-default-putty-profile&#34;&gt;#&lt;/a&gt;&lt;/h4&gt;


&lt;ol&gt;
&lt;li&gt;Open the PuTTY Configurations&lt;/li&gt;
&lt;li&gt;Load the default profile&lt;/li&gt;
&lt;li&gt;Navigate to &lt;strong&gt;Connection -&amp;gt; SSH -&amp;gt; Certificate&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Click on &lt;strong&gt;Set CAPI Cert&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Ensure that your certificate is chosen (you may have a list)&lt;/li&gt;
&lt;li&gt;Click &lt;strong&gt;OK&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Navigate back to &lt;strong&gt;Session&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Highlight the default profile and click &lt;strong&gt;Save&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: &lt;strong&gt;3.2.1&lt;/strong&gt; must be repeated for all PuTTY profiles.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Now open two new sessions, one in the production domain and the other in the
dev/test domain. Repeat &lt;strong&gt;3.2.2&lt;/strong&gt; - &lt;strong&gt;3.2.4&lt;/strong&gt; for each domain.&lt;/p&gt;

&lt;h4 id=&#34;322-check-for-the-existence-of-the-ssh-directory&#34;&gt;3.2.2 Check for the existence of the &lt;code&gt;~/.ssh&lt;/code&gt; directory.&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#322-check-for-the-existence-of-the-ssh-directory&#34;&gt;#&lt;/a&gt;&lt;/h4&gt;


&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ ls -lad .ssh
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;drwx------ 1 cjordan cjordan 4096 Feb 21 16:02 .ssh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If you get &lt;code&gt;ls: cannot access &#39;.sshh&#39;: No such file or directory&lt;/code&gt;, then the
directory must be created.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ mkdir ~/.ssh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&#34;323-create-the-sshauthorized_keys-file&#34;&gt;3.2.3 Create the &lt;code&gt;~/.ssh/authorized_keys&lt;/code&gt; file.&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#323-create-the-sshauthorized_keys-file&#34;&gt;#&lt;/a&gt;&lt;/h4&gt;


&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ cat &amp;gt; ~/.ssh/authorized_keys
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After you hit enter on this command, the prompt will drop to the next line and
wait for input. Now we must copy the CAPI public key from PuTTY.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Open the PuTTY Configurations&lt;/li&gt;
&lt;li&gt;Load the default profile&lt;/li&gt;
&lt;li&gt;Navigate to &lt;strong&gt;Connection -&amp;gt; SSH -&amp;gt; Certificate&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Click on &lt;strong&gt;Copy to Clipboard&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Go back to the terminal window and paste in the clipboard contents, press &lt;code&gt;Enter&lt;/code&gt;,
then &lt;code&gt;Ctrl+D&lt;/code&gt;. It should have looked something like this.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ cat &amp;gt; ~/.ssh/authorized_keys
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ssh-rsa gVVSvgd9lrPUY4rZIQsmDxsN6JljDI42GlgwVtQNxaek9KcLn9lEEC8R
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;CAPI:69862ffda995 CN=JOHN DOE + OID.1.1=1200, OU=Department of Agriculture,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;O=U.S. Government, C=US
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;Note: Your key will be much longer than this. I have stripped out many
characters from mine for example.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Output the &lt;code&gt;~/.ssh/authorized_keys&lt;/code&gt; file and check the contents. It might be a good
idea to open a Notepad file and paste in the CAPI key for comparison.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cat ~/.ssh/authorized_keys
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;It should start with &lt;code&gt;ssh-rsa&lt;/code&gt; and end with &lt;code&gt;C=US&lt;/code&gt;.&lt;/p&gt;

&lt;h4 id=&#34;324-remove-group-permissions-on-ssh-and-sshauthorized_keys&#34;&gt;3.2.4 Remove group permissions on &lt;code&gt;~/.ssh&lt;/code&gt; and &lt;code&gt;~/.ssh/authorized_keys&lt;/code&gt;.&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#324-remove-group-permissions-on-ssh-and-sshauthorized_keys&#34;&gt;#&lt;/a&gt;&lt;/h4&gt;


&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ chmod 700 ~/.ssh
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ chmod 600 ~/.ssh/authorized_keys
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Check the permissions.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ ls -lad ~/.ssh
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;drwx------ 1 cjordan cjordan 4096 Feb 21 16:02 /home/cjordan/.ssh
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ ls -la ~/.ssh/authorized_keys
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;-rw------- 1 cjordan cjordan 546 Mar  2 16:18 authorized_keys
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If the previous steps were followed correctly, you should now be able to log
into new SuperPuTTY sessions with your PIV credentials. Nifty!&lt;/p&gt;

&lt;h2 id=&#34;4-configure-helpful-hot-keys&#34;&gt;4. Configure helpful hot keys&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#4-configure-helpful-hot-keys&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;



&lt;h3 id=&#34;41-moving-through-tabs&#34;&gt;4.1 Moving through tabs&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#41-moving-through-tabs&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;p&gt;When doing work in a terminal, it&amp;rsquo;s more efficient to switch over to the mouse
as little as possible. To achieve this workflow in SuperPuTTY, we need to set
a few hot keys.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Tools -&amp;gt; Options -&amp;gt; Shortcuts&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Look for two items in this window, &lt;strong&gt;NextTab&lt;/strong&gt; and &lt;strong&gt;PrevTab&lt;/strong&gt;. Set them to
whatever you like. For example, I have mine set to &lt;code&gt;Ctrl+.&lt;/code&gt; and &lt;code&gt;Ctrl+,&lt;/code&gt; for
NextTab and PrevTab, respectively. This might seem like a strange choice at
first glance, but those are also the keys for &lt;code&gt;&amp;gt;&lt;/code&gt; and &lt;code&gt;&amp;lt;&lt;/code&gt;, which may make
a little more sense. Additionally, I have tmux set up to change windows with
those same keys, but using &lt;code&gt;Alt&lt;/code&gt; instead of &lt;code&gt;Ctrl&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;For some reason that is completely mysterious to me, SuperPuTTY allows for
changing tabs while maintaining the cursor focus in another tab. This means that
it&amp;rsquo;s often possible to unintentionally send keys to tabs that you aren&amp;rsquo;t even
looking at.  For this reason, you may want to set another key to change focus to
the visible tab to avoid having to switch to the mouse for a click. Go back to
&lt;strong&gt;Tools -&amp;gt; Options -&amp;gt; Shortcuts&lt;/strong&gt; and look for &lt;strong&gt;FocusActiveSession&lt;/strong&gt; and set it
to anything you like. I set mine to &lt;code&gt;Ctrl+f&lt;/code&gt;.&lt;/p&gt;
</description>
                
                        <author>Clint.Jordan@fakeEmailToMakeValidatorHappy.com (Clint Jordan)</author>
                
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/categories/docs">docs</category>
                                
                            
                        
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/workflow">workflow</category>
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/superputty">superputty</category>
                                
                            
                        
                    
                
                <guid>https://code.fs.usda.gov/pages/clint-jordan/site/docs/superputty-setup/</guid>
                <pubDate>Tue, 07 Mar 2023 00:00:00 +0000</pubDate>
            </item>
        
            
            <item>
                <title>EPAS Security</title>
                <link>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-security/</link>
                
                
                <description>&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;h2 id=&#34;access-control---pg_hbaconf&#34;&gt;Access control - pg_hba.conf&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#access-control---pg_hbaconf&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;ul&gt;
&lt;li&gt;host based access control file&lt;/li&gt;
&lt;li&gt;located in the cluster data directory&lt;/li&gt;
&lt;li&gt;read at startup, any change required reload&lt;/li&gt;
&lt;li&gt;contain set of records, one per line&lt;/li&gt;
&lt;li&gt;search record specifies connection type, database name, user name, client IP
and method of authentication;&lt;/li&gt;
&lt;li&gt;top to bottom read&lt;/li&gt;
&lt;li&gt;hostnames, IPv6 and IPv4 supported&lt;/li&gt;
&lt;li&gt;authentication methods, trust, reject, md5, password, gss, sspi, krb5, ident,
peer, pam, ldap, radius, bsd, scram or cert&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;row-level-security-rls&#34;&gt;Row Level Security (RLS)&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#row-level-security-rls&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;ul&gt;
&lt;li&gt;GRANT and REVOKE can be used at table level&lt;/li&gt;
&lt;li&gt;PostgreSQL supports security policies for limiting access at row level&lt;/li&gt;
&lt;li&gt;by default, all rows of a table are visible&lt;/li&gt;
&lt;li&gt;once RLS is enabled on a table, all queries must go through the security
policy&lt;/li&gt;
&lt;li&gt;security policies are controlled by DBA rather than application&lt;/li&gt;
&lt;li&gt;RLS offers stronger security as it is enforced by the database&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TABLE&lt;/span&gt; accounts (manager text, company text, contact_email text);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;ALTER&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TABLE&lt;/span&gt; accounts ENABLE &lt;span style=&#34;color:#66d9ef&#34;&gt;ROW&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;LEVEL&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SECURITY&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To create a policy on the accounts table to allow the managers role to view the
rows of their accounts, the &lt;code&gt;CREATE POLICY&lt;/code&gt; command can be used:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; POLICY account_managers &lt;span style=&#34;color:#66d9ef&#34;&gt;ON&lt;/span&gt; accounts &lt;span style=&#34;color:#66d9ef&#34;&gt;TO&lt;/span&gt; managers &lt;span style=&#34;color:#66d9ef&#34;&gt;USING&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(manager &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;current_user&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To allow all users to view their own row in a user table, a simple policy can be
used:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; POLICY user_policy &lt;span style=&#34;color:#66d9ef&#34;&gt;ON&lt;/span&gt; users &lt;span style=&#34;color:#66d9ef&#34;&gt;USING&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;user&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;current_user&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;application-access&#34;&gt;Application access&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#application-access&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;ul&gt;
&lt;li&gt;application acces is controlled by settings in both &lt;code&gt;postgresql.conf&lt;/code&gt; and
&lt;code&gt;pg_hba.conf&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;set the following parameters in &lt;code&gt;postgresql.conf&lt;/code&gt;:
&lt;ul&gt;
&lt;li&gt;listen_addresses&lt;/li&gt;
&lt;li&gt;max_connections&lt;/li&gt;
&lt;li&gt;superuser_reserved_connections&lt;/li&gt;
&lt;li&gt;port&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;data-redaction&#34;&gt;Data redaction&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#data-redaction&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;ul&gt;
&lt;li&gt;data redaction can be used to conceal data values from selected users&lt;/li&gt;
&lt;li&gt;the redaction function is incorporated into redaction policy using &lt;code&gt;CREATE REDACTION POLICY&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;data redaction is controlled by &lt;code&gt;edb_data_redaction&lt;/code&gt; configuration parameter&lt;/li&gt;
&lt;li&gt;useful for compliance to GDPR, PCI, and HIPAA standards&lt;/li&gt;
&lt;/ul&gt;
</description>
                
                        <author>Clint.Jordan@fakeEmailToMakeValidatorHappy.com (Clint Jordan)</author>
                
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/categories/notes">notes</category>
                                
                            
                        
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/edb">edb</category>
                                
                            
                        
                    
                
                <guid>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-security/</guid>
                <pubDate>Mon, 06 Mar 2023 00:00:00 +0000</pubDate>
            </item>
        
            
            <item>
                <title>History, query buffer, and output control</title>
                <link>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-query-buffer/</link>
                
                
                <description>&lt;blockquote&gt;&lt;/blockquote&gt;&lt;p&gt;Show the command history.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\s
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Save the command history to a file, &lt;code&gt;FILENAME&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\s FILENAME
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Edit the query buffer and then execute it.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\e 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Open the query buffer in a file, &lt;code&gt;FILENAME&lt;/code&gt;, and execute it upon save.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\e FILENAME
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Save the query buffer to a file, &lt;code&gt;FILENAME&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\w FILENAME
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Direct the output of the next command to file, &lt;code&gt;FILENAME&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\o FILENAME
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Execute the query buffer and send output to file, &lt;code&gt;FILENAME&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\g
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Run previous query repeatedly.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\watch &amp;lt;seconds&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
                
                        <author>Clint.Jordan@fakeEmailToMakeValidatorHappy.com (Clint Jordan)</author>
                
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/categories/notes">notes</category>
                                
                            
                        
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/edb">edb</category>
                                
                            
                        
                    
                
                <guid>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-query-buffer/</guid>
                <pubDate>Mon, 06 Mar 2023 00:00:00 +0000</pubDate>
            </item>
        
            
            <item>
                <title>Meta commands</title>
                <link>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-common-meta/</link>
                
                
                <description>&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;h2 id=&#34;information-commands&#34;&gt;Information commands&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#information-commands&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\d(i, s, t, v, b, S)[+] [pattern]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;lists information about indexes, sequences, tables, views, tablespaces or
system objects. Any combination of letters may be used in any order, for example
&lt;code&gt;\dvs&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;+&lt;/code&gt; displays comments&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\d[+] [pattern]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;for each relation describe/display the relation structure details&lt;/li&gt;
&lt;li&gt;&lt;code&gt;+&lt;/code&gt; displays any comments associated with the columns of the table, and if the
table has an OID column&lt;/li&gt;
&lt;li&gt;without a pattern, &lt;code&gt;\d[+]&lt;/code&gt; is equivalent to &lt;code&gt;\dtvs[+]&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\l [+]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;list the names, owners, and character set encodings of all the databases in
the server&lt;/li&gt;
&lt;li&gt;if +  is appended to the command name, database descriptions are also
displayed&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\dn+ [pattern]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;lists schemas (namespaces)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;+&lt;/code&gt; adds permissions and description to output&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\df+ [pattern]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;lists functions&lt;/li&gt;
&lt;li&gt;&lt;code&gt;+&lt;/code&gt; adds owner, language, source code, and description to output&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;other-common-meta-commands&#34;&gt;Other common meta commands&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#other-common-meta-commands&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\conninfo
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;display current connection information&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\q or ^d or quit or exit
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;quits the edb-psql program&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\cd [directory]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;changes the current working directory&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\! [command]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;executes the specified system command&lt;/li&gt;
&lt;li&gt;if no command is specified, escapes to a separate Unix shell&lt;/li&gt;
&lt;li&gt;ex: print current working directory, &lt;code&gt;\! pwd&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;help-commands&#34;&gt;Help commands&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#help-commands&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\?
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;display list of all meta commands&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\h [command]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;shows information about SQL commands&lt;/li&gt;
&lt;li&gt;if command isn&amp;rsquo;t specified, lists all SQL commands&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb-psql --help
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;lists command line options for edb-psql&lt;/li&gt;
&lt;/ul&gt;
</description>
                
                        <author>Clint.Jordan@fakeEmailToMakeValidatorHappy.com (Clint Jordan)</author>
                
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/categories/notes">notes</category>
                                
                            
                        
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/edb">edb</category>
                                
                            
                        
                    
                
                <guid>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-common-meta/</guid>
                <pubDate>Mon, 06 Mar 2023 00:00:00 +0000</pubDate>
            </item>
        
            
            <item>
                <title>pg_dump and pg_restore</title>
                <link>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-pgdump-pgrestore/</link>
                
                
                <description>&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;h2 id=&#34;exporting-a-schema&#34;&gt;Exporting a schema&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#exporting-a-schema&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pg_dump -p 5443 -d db01d -Fp -n sqlprotect -f sqlprotect.dmp
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;restoring-a-schema&#34;&gt;Restoring a schema&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#restoring-a-schema&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;psql -p 5444 -d db01p -f sqlprotect.dmp
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
                
                        <author>Clint.Jordan@fakeEmailToMakeValidatorHappy.com (Clint Jordan)</author>
                
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/categories/notes">notes</category>
                                
                            
                        
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/edb">edb</category>
                                
                            
                        
                    
                
                <guid>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-pgdump-pgrestore/</guid>
                <pubDate>Mon, 06 Mar 2023 00:00:00 +0000</pubDate>
            </item>
        
            
            <item>
                <title>SQL/Protect - import/export between clusters</title>
                <link>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/sql-protect/edb-cluster-export-method/</link>
                
                
                <description>&lt;blockquote&gt;Migrating SQL/Protect data between clusters&lt;/blockquote&gt;
&lt;h2 id=&#34;testing-procedure-overview&#34;&gt;Testing procedure overview&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#testing-procedure-overview&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;p&gt;The intention of this test is to demonstrate that SQL/Protect data can be
transferred between two EPAS database clusters, which will allow production
servers to remain in active mode at all times. Most of the steps found in this
test were taken directly from the &lt;a href=&#34;https://www.enterprisedb.com/docs/epas/latest/epas_security_guide/02_protecting_against_sql_injection_attacks/04_backing_up_restoring_sql_protect/&#34;&gt;edb
documentation&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&#34;step-1-cluster-setup&#34;&gt;Step 1: Cluster setup&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#step-1-cluster-setup&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;



&lt;h3 id=&#34;create-the-clusters&#34;&gt;Create the clusters&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#create-the-clusters&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;p&gt;Create a cluster to simulate a production environment

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;enterprisedb $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
initdb -D ~/as13/data_p

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Create a cluster to simulate a development environment

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;enterprisedb $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
initdb -D ~/as13/data_d

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;

&lt;h3 id=&#34;modify-the-postgresqlconf-files&#34;&gt;Modify the &lt;code&gt;postgresql.conf&lt;/code&gt; files&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#modify-the-postgresqlconf-files&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;p&gt;Append the following lines to the production version (&lt;code&gt;/as13/data_p/postgresql.conf&lt;/code&gt;):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;# Shared Preload Libraries
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;shared_preload_libraries = &amp;#39;$libdir/sqlprotect&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;# SQL/Protect settings
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb_sql_protect.enabled = on
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb_sql_protect.level = active
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb_sql_protect.max_protected_roles = 64
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb_sql_protect.max_protected_relations = 1024
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb_sql_protect.max_queries_to_save = 5000
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Append the following lines to the development version (&lt;code&gt;/as13/data_d/postgresql.conf&lt;/code&gt;):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;# Shared Preload Libraries
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;shared_preload_libraries = &amp;#39;$libdir/sqlprotect&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;# SQL/Protect settings
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb_sql_protect.enabled = on
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb_sql_protect.level = learn
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb_sql_protect.max_protected_roles = 64
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb_sql_protect.max_protected_relations = 1024
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb_sql_protect.max_queries_to_save = 5000
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;start-the-clusters&#34;&gt;Start the clusters&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#start-the-clusters&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;p&gt;Start both clusters

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;enterprisedb $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
pg_ctl -D ~/as13/data_p -o &#34;-p 5444&#34; start
pg_ctl -D ~/as13/data_d -o &#34;-p 5443&#34; start

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;

&lt;h3 id=&#34;connect-to-a-cluster&#34;&gt;Connect to a cluster&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#connect-to-a-cluster&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;p&gt;Connecting to a cluster

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;enterprisedb $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-shell&#34;&gt;
                    
psql &#34;port=5444&#34;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;

&lt;h3 id=&#34;ensure-that-sqlprotect-is-enabled&#34;&gt;Ensure that SQL/Protect is enabled&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#ensure-that-sqlprotect-is-enabled&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;p&gt;Production

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;edb=#&#34;
            data-output=&#34;2-6,8-12,14-20&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
show shared_preload_libraries; 
 shared_preload_libraries
 --------------------------
  $libdir/sqlprotect
  (1 row)

show edb_sql_protect.enabled; 
 edb_sql_protect.enabled
 -------------------------
  on
  (1 row)

show edb_sql_protect.level;
 edb_sql_protect.level
 -----------------------
  active
  (1 row)

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Development

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;edb=#&#34;
            data-output=&#34;2-6,8-12,14-20&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
show shared_preload_libraries; 
 shared_preload_libraries
 --------------------------
  $libdir/sqlprotect
  (1 row)

show edb_sql_protect.enabled; 
 edb_sql_protect.enabled
 -------------------------
  on
  (1 row)

show edb_sql_protect.level;
 edb_sql_protect.level
 -----------------------
  learn
  (1 row)

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;

&lt;h2 id=&#34;step-2-create-databases-roles-and-schemas&#34;&gt;Step 2: Create databases, roles, and schemas&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#step-2-create-databases-roles-and-schemas&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;



&lt;h3 id=&#34;production-cluster&#34;&gt;Production cluster&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#production-cluster&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;p&gt;Create database &lt;code&gt;db01p&lt;/code&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;edb=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
CREATE DATABASE db01p;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Connect to database

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;edb=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
\c db01p

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Create the &lt;code&gt;sqlprotect&lt;/code&gt; schema and objects

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01p=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-text&#34;&gt;
                    
\i /usr/edb/as13/share/contrib/sqlprotect.sql

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Create user and schema

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01p=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
create schema test;
create user test;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Protect the new role, &lt;code&gt;test&lt;/code&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01p=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
SELECT sqlprotect.protect_role(&#39;test&#39;);

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;View the protected users

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01p=#&#34;
            data-output=&#34;2-10&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
SELECT * FROM sqlprotect.list_protected_users;
  dbname  | username | protect_relations | allow_utility_cmds | allow_tautology | allow_empty_dml
----------+----------+-------------------+--------------------+-----------------+-----------------
 cluster1 | test     | t                 | f                  | f               | f
(1 row)

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Create tables

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01p=#&#34;
            data-output=&#34;4&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
create table test_table(i int);
insert into test_table select generate_series(1,100);
grant select on table test_table to test;

create table another_test_table(i int);
insert into another_test_table select generate_series(1,100);
grant select on table another_test_table to test;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Attempt to select from tables with user &lt;code&gt;test&lt;/code&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01p=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
set role test;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01p=&amp;gt;&#34;
            data-output=&#34;2,3,5&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
select * from test_table limit 10;
ERROR:  SQLPROTECT: Illegal Query: relations

select * from another_test_table limit 10;
ERROR:  SQLPROTECT: Illegal Query: relations

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;p&gt;Check the &lt;code&gt;roleid&lt;/code&gt; for the user &lt;code&gt;test&lt;/code&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01p=#&#34;
            data-output=&#34;2-5&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
SELECT usesysid FROM pg_user WHERE usename=&#39;test&#39;;
 usesysid
----------
    16428
(1 row)

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;View the protected roles with OIDs (Object IDs).

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01p=#&#34;
            data-output=&#34;2-5&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
SELECT * FROM sqlprotect.edb_sql_protect;
 dbid  | roleid | protect_relations | allow_utility_cmds | allow_tautology | allow_empty_dml
-------+--------+-------------------+--------------------+-----------------+-----------------
 16384 |  16428 | t                 | f                  | f               | f
(1 row)

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;View the protected roles with the object names.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01p=#&#34;
            data-output=&#34;2-5&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
SELECT * FROM sqlprotect.list_protected_users;
 dbname | username | protect_relations | allow_utility_cmds | allow_tautology | allow_empty_dml
--------+----------+-------------------+--------------------+-----------------+-----------------
 db01p  | test     | t                 | f                  | f               | f
(1 row)

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Set the &lt;code&gt;protect_relations&lt;/code&gt; field to &lt;code&gt;&#39;f&#39;&lt;/code&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01p=#&#34;
            data-output=&#34;2-5&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
update sqlprotect.edb_sql_protect set protect_relations=&#39;f&#39; where dbid=16384 and roleid=16428;
UPDATE 1

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Now attempt to select from the tables again

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01p=&amp;gt;&#34;
            data-output=&#34;2-8,10-25&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
select * from test_table limit 3;
 i
----
  1
  2
  3
(3 rows)

select * from another_test_table limit 3;
 i
----
  1
  2
  3
(3 rows)

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;

&lt;h3 id=&#34;development-cluster&#34;&gt;Development cluster&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#development-cluster&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;p&gt;Create database &lt;code&gt;db01d&lt;/code&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;edb=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
CREATE DATABASE db01d;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Connect to database

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;edb=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
\c db01d

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Create the &lt;code&gt;sqlprotect&lt;/code&gt; schema and objects

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-text&#34;&gt;
                    
\i /usr/edb/as13/share/contrib/sqlprotect.sql

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;At this point, the two clusters are exactly the same down to the OIDs. For the
development test cluster additional users and tables will be created to ensure
that the OIDs between the objects of interest are different.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;3,6,9&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
create schema user1;
create user user1;

create schema user2;
create user user2;

create schema user3;
create user user3;

create schema test;
create user test;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Protect the new role, &lt;code&gt;test&lt;/code&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
SELECT sqlprotect.protect_role(&#39;test&#39;);

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;View the protected users

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;2-10&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
SELECT * FROM sqlprotect.list_protected_users;
  dbname  | username | protect_relations | allow_utility_cmds | allow_tautology | allow_empty_dml
----------+----------+-------------------+--------------------+-----------------+-----------------
 cluster1 | test     | t                 | f                  | f               | f
(1 row)

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Create tables

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;4,8,12,16&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
create table t1(i int);
insert into t1 select generate_series(1,100);
grant select on table t1 to user1;

create table t2(i int);
insert into t2 select generate_series(1,100);
grant select on table t2 to user2;

create table t3(i int);
insert into t3 select generate_series(1,100);
grant select on table t3 to user3;

create table test_table(i int);
insert into test_table select generate_series(1,100);
grant select on table test_table to test;

create table another_test_table(i int);
insert into another_test_table select generate_series(1,100);
grant select on table another_test_table to test;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;Execute queries with user &lt;code&gt;test&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: it seems that a new psql session must be started before &amp;ldquo;learning&amp;rdquo; any
behavior after protecting a role.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
\q

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;


&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;enterprisedb $&#34;
            data-output=&#34;&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-text&#34;&gt;
                    
psql -p 5443 -d db01d -U test

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;


&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=&amp;gt;&#34;
            data-output=&#34;2,3&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
create table yet_another_test_table(i int);
NOTICE:  SQLPROTECT: This command type is illegal for this user
CREATE TABLE

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;


&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=&amp;gt;&#34;
            data-output=&#34;2,3&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
db01d=&gt; insert into yet_another_test_table select generate_series(1,100);
NOTICE:  SQLPROTECT: Learned relation: 16453
INSERT 0 100

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;


&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01p=&amp;gt;&#34;
            data-output=&#34;2-9,11-25&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
select * from test_table limit 3;
NOTICE:  SQLPROTECT: Learned relation: 16444
 i
---
 1
 2
 3
(3 rows)

select * from another_test_table limit 3;
NOTICE:  SQLPROTECT: Learned relation: 16447
 i
---
 1
 2
 3
(3 rows)


            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;p&gt;Check the &lt;code&gt;roleid&lt;/code&gt; for the user &lt;code&gt;test&lt;/code&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;2-5&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
SELECT usesysid FROM pg_user WHERE usename=&#39;test&#39;;
 usesysid
----------
    16434
(1 row)

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;View the protected roles with OIDs (Object IDs).

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;2-5&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
SELECT * FROM sqlprotect.edb_sql_protect;
 dbid  | roleid | protect_relations | allow_utility_cmds | allow_tautology | allow_empty_dml
-------+--------+-------------------+--------------------+-----------------+-----------------
 16384 |  16434 | t                 | f                  | f               | f
(1 row)

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;
&lt;p&gt;View the protected roles with the object names.

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;2-5&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
SELECT * FROM sqlprotect.list_protected_users;
 dbname | username | protect_relations | allow_utility_cmds | allow_tautology | allow_empty_dml
--------+----------+-------------------+--------------------+-----------------+-----------------
 db01d  | test     | t                 | f                  | f               | f
(1 row)

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;/p&gt;

&lt;h2 id=&#34;step-3-export-and-import&#34;&gt;Step 3: Export and Import&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#step-3-export-and-import&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;



&lt;h3 id=&#34;export-data-from-development&#34;&gt;Export data from development&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#export-data-from-development&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;



&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db01d=#&#34;
            data-output=&#34;2-5&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;-&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
SELECT sqlprotect.export_sqlprotect(&#39;/var/lib/edb/as13/backups/sqlprotect.dmp&#39;);
 export_sqlprotect
-------------------

(1 row)

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;


&lt;h3 id=&#34;delete-all-sqlprotect-data-from-production&#34;&gt;Delete all SQL/Protect data from production&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#delete-all-sqlprotect-data-from-production&#34;&gt;#&lt;/a&gt;&lt;/h3&gt;


&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;db01p=# DELETE FROM sqlprotect.edb_sql_protect_rel;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;DELETE 0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;db01p=# DELETE FROM sqlprotect.edb_sql_protect;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;DELETE 1
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;db01p=# SELECT * FROM sqlprotect.edb_sql_protect_stats;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; username | superusers | relations | commands | tautology | dml
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;----------+------------+-----------+----------+-----------+-----
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; test     |          0 |         3 |        0 |         0 |   0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(1 row)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;db01p=# SELECT sqlprotect.drop_stats(&amp;#39;test&amp;#39;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; drop_stats
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;------------
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(1 row)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;db01p=# SELECT * FROM sqlprotect.edb_sql_protect_stats;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; username | superusers | relations | commands | tautology | dml
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;----------+------------+-----------+----------+-----------+-----
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(0 rows)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;db01p=# SELECT * FROM sqlprotect.edb_sql_protect_queries;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; username | ip_address | port | machine_name |         date_time         |                               query
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;----------+------------+------+--------------+---------------------------+-------------------------------------------------------------------
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; test     |            |      |              | 22-MAR-23 19:03:00 -05:00 | select * from another_test_table limit 10;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; test     |            |      |              | 22-MAR-23 19:03:00 -05:00 | SELECT r.rolname, r.rolsuper, r.rolinherit,                      +
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |            |      |              |                           |   r.rolcreaterole, r.rolcreatedb, r.rolcanlogin,                 +
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |            |      |              |                           |   r.rolconnlimit, r.rolvaliduntil,                               +
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |            |      |              |                           |   ARRAY(SELECT b.rolname                                         +
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |            |      |              |                           |         FROM pg_catalog.pg_auth_members m                        +
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |            |      |              |                           |         JOIN pg_catalog.pg_roles b ON (m.roleid = b.oid)         +
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |            |      |              |                           |         WHERE m.member = r.oid) as memberof                      +
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |            |      |              |                           | , pg_catalog.shobj_description(r.oid, &amp;#39;pg_authid&amp;#39;) AS description+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |            |      |              |                           | , r.rolreplication                                               +
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |            |      |              |                           | , r.rolbypassrls                                                 +
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |            |      |              |                           | , r.rolprofile                                                   +
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |            |      |              |                           | , edb_get_role_status(r.oid)                                     +
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |            |      |              |                           | , edb_get_password_expiry_date(r.oid)                            +
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |            |      |              |                           | , r.rollockdate                                                  +
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |            |      |              |                           | FROM pg_catalog.pg_roles r                                       +
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |            |      |              |                           | WHERE r.rolname !~ &amp;#39;^pg_&amp;#39;                                        +
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |            |      |              |                           | ORDER BY 1;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; test     |            |      |              | 22-MAR-23 19:03:00 -05:00 | select * from test_table limit 10;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(3 rows)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;db01p=# SELECT sqlprotect.drop_queries(&amp;#39;test&amp;#39;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; drop_queries
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;--------------
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            3
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(1 row)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;db01p=# SELECT sqlprotect.import_sqlprotect(&amp;#39;/var/lib/edb/as13/backups/sqlprotect.dmp&amp;#39;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; import_sqlprotect
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;-------------------
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(1 row)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
                
                        <author>Clint.Jordan@fakeEmailToMakeValidatorHappy.com (Clint Jordan)</author>
                
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/categories/notes">notes</category>
                                
                            
                        
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/edb">edb</category>
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/sql-protect">sql protect</category>
                                
                            
                        
                    
                
                <guid>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/sql-protect/edb-cluster-export-method/</guid>
                <pubDate>Mon, 06 Mar 2023 00:00:00 +0000</pubDate>
            </item>
        
            
            <item>
                <title>Variables</title>
                <link>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-variables/</link>
                
                
                <description>&lt;blockquote&gt;&lt;/blockquote&gt;&lt;p&gt;Use &lt;code&gt;\set&lt;/code&gt; meta command to set a variable.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;=&amp;gt; \set city Edmonton
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;=&amp;gt; \echo :city
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Edmonton
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Use &lt;code&gt;\unset&lt;/code&gt; to delete a variable.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;\unset city
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
                
                        <author>Clint.Jordan@fakeEmailToMakeValidatorHappy.com (Clint Jordan)</author>
                
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/categories/notes">notes</category>
                                
                            
                        
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/edb">edb</category>
                                
                            
                        
                    
                
                <guid>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-variables/</guid>
                <pubDate>Mon, 06 Mar 2023 00:00:00 +0000</pubDate>
            </item>
        
            
            <item>
                <title>EDB schemas</title>
                <link>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-schemas/</link>
                
                
                <description>&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;h2 id=&#34;creating-schemas&#34;&gt;Creating schemas&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#creating-schemas&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;db1=# CREATE SCHEMA IF NOT EXISTS schema_name [ AUTHORIZATION role-specification]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The &lt;code&gt;role-specification&lt;/code&gt; here is the schema owner. It can be a user, group, or
a role.&lt;/p&gt;
&lt;p&gt;In Postgres, a user is &lt;em&gt;not&lt;/em&gt; a schema. A user is a global object which exists
outside the database. Schemas are database level objects, so you must be
connected to the target database before creating one. A schema is a collection
of database tables, views, sequences, functions, and domains owned by a user.&lt;/p&gt;
&lt;p&gt;Benefits of schemas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A database can contain one or more named schemas&lt;/li&gt;
&lt;li&gt;By default, all databases contain a public schema&lt;/li&gt;
&lt;li&gt;There are several reason to use schemas
&lt;ul&gt;
&lt;li&gt;to allow many users to use one database without interfereing with each
other&lt;/li&gt;
&lt;li&gt;to organize database objects into logical groups to make them more
manageable&lt;/li&gt;
&lt;li&gt;third-party applications can be put into separate shemas so they cannot
collide with the names of other objects&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Example: if a depreciated application/user needs to be removed, its database
schema can be dropped instead of dropping all its objects individually.&lt;/p&gt;
&lt;p&gt;Below is an example of creating a new database, new users, and new db schemas.&lt;/p&gt;
&lt;p&gt;Create user1, user2, and user3. Users, groups, and roles are the same thing in
PostgreSQL, with the only difference being that users have permission to log in
by default. The CREATE USER and CREATE GROUP statements are actually aliases for
the CREATE ROLE statement.&lt;/p&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;edb=#&#34;
            data-output=&#34;2,3,5,6,8&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
CREATE USER user1 PASSWORD &#39;1&#39;;
CREATE ROLE

CREATE USER user2 PASSWORD &#39;2&#39;;
CREATE ROLE

CREATE USER user3 PASSWORD &#39;3&#39;;
CREATE ROLE

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;p&gt;Create a database called db1. It is owned by the superuser, enterprisedb.&lt;/p&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;edb=#&#34;
            data-output=&#34;2&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
edb=# CREATE DATABASE db1;
CREATE DATABASE

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;p&gt;Revoke connect privilege from everyone excluding the owner and superuser(s).&lt;/p&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;edb=#&#34;
            data-output=&#34;2&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
REVOKE CONNECT ON DATABASE db1 FROM public;
REVOKE

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;p&gt;Grant connect privilege to &lt;code&gt;user1&lt;/code&gt; and &lt;code&gt;user3&lt;/code&gt;;&lt;/p&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;edb=#&#34;
            data-output=&#34;2&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
GRANT CONNECT ON DATABASE db1 TO user1, user3;
GRANT

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;p&gt;Connect to &lt;code&gt;db1&lt;/code&gt; in order to create schemas.&lt;/p&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;edb=#&#34;
            data-output=&#34;2,3&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
\c db1
(psql 13.4.8, server 13.4.8)
You are now connected to database &#34;db1&#34; as user &#34;enterprisedb&#34;.

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;p&gt;Show list of schemas. The &lt;code&gt;public&lt;/code&gt; schema owned by &lt;code&gt;enterprisedb&lt;/code&gt; should be the
only one listed at this point.&lt;/p&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db1=#&#34;
            data-output=&#34;2-10&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
\dn
    List of schemas
  Name  |    Owner
--------+--------------
 public | enterprisedb
(1 row)

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;p&gt;Create a schema &lt;code&gt;user1&lt;/code&gt; owned by the user/role &lt;code&gt;user1&lt;/code&gt; and the same for &lt;code&gt;user3&lt;/code&gt;.&lt;/p&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db1=#&#34;
            data-output=&#34;2,3,5&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
CREATE SCHEMA IF NOT EXISTS user1 AUTHORIZATION user1;
CREATE SCHEMA

CREATE SCHEMA IF NOT EXISTS user3 AUTHORIZATION user3;
CREATE SCHEMA

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;p&gt;The list of schemas should now include &lt;code&gt;user1&lt;/code&gt; and &lt;code&gt;user3&lt;/code&gt;.&lt;/p&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db1=#&#34;
            data-output=&#34;2-10&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
\dn
    List of schemas
  Name  |    Owner
--------+--------------
 public | enterprisedb
 user1  | user1
 user3  | user3
(3 rows)

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;p&gt;Connect to &lt;code&gt;db1&lt;/code&gt; as &lt;code&gt;user3&lt;/code&gt;.&lt;/p&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db1=#&#34;
            data-output=&#34;2-10&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
\c db1 user3
Password for user user3:
psql (13.10.14, server 13.10.14)
You are now connected to database &#34;db1&#34; as user &#34;user3&#34;.

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;p&gt;Create a table and insert a row.&lt;/p&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db1=&amp;gt;&#34;
            data-output=&#34;2,3,5&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
CREATE TABLE t1(i varchar);
CREATE TABLE

INSERT INTO t1 values(&#39;this is user3 data in t1&#39;);
INSERT 0 1

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;


&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db1=&amp;gt;&#34;
            data-output=&#34;2-10&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
\dt
       List of relations
 Schema | Name | Type  | Owner
--------+------+-------+-------
 user3  | t1   | table | user3
(1 row)

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;


&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db1=&amp;gt;&#34;
            data-output=&#34;2-5,7-8,10-11,13-14,16-17,19-30&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
\c db1 user1
Password for user user1:
psql (13.10.14, server 13.10.14)
You are now connected to database &#34;db1&#34; as user &#34;user1&#34;.

create table t1(i varchar);
CREATE TABLE

create table t2(i varchar);
CREATE TABLE

INSERT INTO t1 values(&#39;this is user1 data in table t1&#39;);
INSERT 0 1

INSERT INTO t2 values(&#39;this is user1 data in table t2&#39;);
INSERT 0 1

\dt
       List of relations
 Schema | Name | Type  | Owner
--------+------+-------+-------
 user1  | t1   | table | user1
 user1  | t2   | table | user1
(1 row)

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;p&gt;Similar actions connected as &lt;code&gt;user1&lt;/code&gt;. Notice how the two &lt;code&gt;t1&lt;/code&gt; tables do not
interfere because they exists in separate schemas.&lt;/p&gt;

&lt;h2 id=&#34;schema-search-path&#34;&gt;Schema search path&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#schema-search-path&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;p&gt;The schema search path determines which schemas are searched for matching table
names. It is used when fully qualified object names are not used in a query.&lt;/p&gt;
&lt;p&gt;Example: The following statement will find the first &lt;code&gt;employee&lt;/code&gt; table from the
schemas listed in the search path.&lt;/p&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db1=#&#34;
            data-output=&#34;2-10&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
SELECT * FROM employee;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;p&gt;Default search path. Schema &lt;code&gt;$user&lt;/code&gt; will automatically be replaced with the
current user.&lt;/p&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db1=#&#34;
            data-output=&#34;2-10&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
SHOW search_path;
   search_path
-----------------
 &#34;$user&#34;, public
(1 row)

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

&lt;p&gt;Setting the search path.&lt;/p&gt;

&lt;html lang=&#34;en&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt; 
    &lt;div class=&#34;code-toolbar&#34;&gt;
        &lt;pre 
            tabindex=&#34;0&#34; 
            style=&#34;
                display:block;
                color:#f8f8f2;
                background-color:#272822;
                -moz-tab-size:4;
                -o-tab-size:4;tab-size:4;
                &#34;
            class=&#34;command-line&#34;
            lang=&#34;en&#34;
            data-prompt=&#34;db1=#&#34;
            data-output=&#34;2-10&#34;
            data-filter-output=&#34;(out)&#34;
            data-continuation-str=&#34;&#34;
            date-continuation-prompt=&#34;&amp;gt;&#34;
            &gt;

            &lt;code class=&#34;language-sql&#34;&gt;
                    
SET search_path TO schema1, schema2, public;

            &lt;/code&gt;
        &lt;/pre&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/html&gt;

</description>
                
                        <author>Clint.Jordan@fakeEmailToMakeValidatorHappy.com (Clint Jordan)</author>
                
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/categories/notes">notes</category>
                                
                            
                        
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/edb">EDB</category>
                                
                            
                        
                    
                
                <guid>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-schemas/</guid>
                <pubDate>Thu, 02 Mar 2023 00:00:00 +0000</pubDate>
            </item>
        
            
            <item>
                <title>EDB Postgres Enterprise Manager</title>
                <link>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-pem/</link>
                
                
                <description>&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;h1 id=&#34;common-connection-problems&#34;&gt;Common connection problems&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#common-connection-problems&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;


&lt;ul&gt;
&lt;li&gt;Could not connect to Server - Connection refused
&lt;ul&gt;
&lt;li&gt;This error occurs when either the database server isn&amp;rsquo;t running or the
server isn&amp;rsquo;t configured to accept external TCP/IP connections&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;FATAL - no ph_hba.conf entry
&lt;ul&gt;
&lt;li&gt;This means your server can be contacted over the network, but is not
configured to accept the connection. Your client is not detected as a legal user
for the database:wq&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
                
                        <author>Clint.Jordan@fakeEmailToMakeValidatorHappy.com (Clint Jordan)</author>
                
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/categories/notes">notes</category>
                                
                            
                        
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/edb">EDB</category>
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/pem">PEM</category>
                                
                            
                        
                    
                
                <guid>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-pem/</guid>
                <pubDate>Tue, 28 Feb 2023 00:00:00 +0000</pubDate>
            </item>
        
            
            <item>
                <title>EDB User Profile Management</title>
                <link>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-user-profiles/</link>
                
                
                <description>&lt;blockquote&gt;&lt;/blockquote&gt;
&lt;h1 id=&#34;user-profiles-password-attributes&#34;&gt;User profiles (password attributes)&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#user-profiles-password-attributes&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;


&lt;ul&gt;
&lt;li&gt;A profile is a named set of password attributes&lt;/li&gt;
&lt;li&gt;User profiles can be used to manage account status and password expiration&lt;/li&gt;
&lt;li&gt;The &lt;code&gt;default&lt;/code&gt; profile is assigned to all users&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;User profiles provide the following security features&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;Attribute&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Value&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;FAILED_LOGIN_ATTEMPTS&lt;/td&gt;
&lt;td&gt;UNLIMITED&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PASSWORD_LOCK_TIME&lt;/td&gt;
&lt;td&gt;UNLIMITED&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PASSWORD_LIFE_TIME&lt;/td&gt;
&lt;td&gt;UNLIMITED&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PASSWORD_GRACE_TIME&lt;/td&gt;
&lt;td&gt;UNLIMITED&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PASSWORD_REUSE_TIME&lt;/td&gt;
&lt;td&gt;UNLIMITED&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PASSWORD_REUSE_MAX&lt;/td&gt;
&lt;td&gt;UNLIMITED&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PASSWORD_GRACE_TIME&lt;/td&gt;
&lt;td&gt;UNLIMITED&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PASSWORD_VERIFY_FUNCTION&lt;/td&gt;
&lt;td&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&#34;view-a-user-profile&#34;&gt;View a user profile&amp;nbsp;&lt;a class=&#34;headline-hash no-text-decoration&#34; href=&#34;#view-a-user-profile&#34;&gt;#&lt;/a&gt;&lt;/h2&gt;


&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;edb=# select * from dba_profiles
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;where profile=&amp;#39;DEFAULT&amp;#39;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; profile |      resource_name       | resource_type |   limit   | common
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;---------+--------------------------+---------------+-----------+--------
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; DEFAULT | FAILED_LOGIN_ATTEMPTS    | PASSWORD      | UNLIMITED | NO
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; DEFAULT | PASSWORD_ALLOW_HASHED    | PASSWORD      | YES       | NO
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; DEFAULT | PASSWORD_GRACE_TIME      | PASSWORD      | UNLIMITED | NO
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; DEFAULT | PASSWORD_LIFE_TIME       | PASSWORD      | UNLIMITED | NO
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; DEFAULT | PASSWORD_LOCK_TIME       | PASSWORD      | UNLIMITED | NO
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; DEFAULT | PASSWORD_REUSE_MAX       | PASSWORD      | UNLIMITED | NO
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; DEFAULT | PASSWORD_REUSE_TIME      | PASSWORD      | UNLIMITED | NO
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; DEFAULT | PASSWORD_VERIFY_FUNCTION | PASSWORD      | NULL      | NO
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(8 rows)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
                
                        <author>Clint.Jordan@fakeEmailToMakeValidatorHappy.com (Clint Jordan)</author>
                
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/categories/notes">notes</category>
                                
                            
                        
                     
                        
                             
                            
                                
                                 
                                    <category domain="https://code.fs.usda.gov/pages/clint-jordan/site/tags/edb">EDB</category>
                                
                            
                        
                    
                
                <guid>https://code.fs.usda.gov/pages/clint-jordan/site/notes/edb/edb-user-profiles/</guid>
                <pubDate>Tue, 28 Feb 2023 00:00:00 +0000</pubDate>
            </item>
        
    </channel>
</rss>


